function foo(x) {
    if (([write x, .led.select] == 1) and ([write 1, .led.state] == 1)) {
        [write 0, .sw.select];
        [read .sw.state];
    } else {
        -1;
    }
}

